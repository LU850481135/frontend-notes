<template>
  <div>
    <input
      type="text"
      :value="count"
      @input="handleChange"
    >
    <button @click="add">+</button>
    <button @click="reduce">-</button>
  </div>
</template>

<script>
export default {
  // 自定义v-model
  // v-model是@input的语法糖，甚至可以在子组件进行数据的双向绑定，只需满足这两个条件
  // 1. 接收一个:value属性
  // 2. 触发input事件

  // 1. 上面的input 使用了:value，而不是v-model
  // 2. 上面的change和model.event要对应起来
  // 3. count属性对应起来
  name: 'CustomVModelEG',
  model: {
    prop: 'count',
    event: 'change'
  },
  props: {
    count: {
      type: Number,
      default () {
        return 0
      }
    }
  },
  data () {
    return {
      num: 0
    }
  },
  methods: {
    add () {
      this.num = this.count
      this.num++
      this.$emit('change', this.num)
    },
    reduce () {
      this.num = this.count
      this.num--
      this.$emit('change', this.num)
    },
    handleChange (e) {
      this.$emit('change', this.count)
    }
  }
}
</script>
