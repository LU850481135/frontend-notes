# MVVM模式
## 对于MVVM的理解

**面向dom开发(MVC)**
 1. M层
 2. V层
 3. VM层
 **面向数据进行开发**

 **vue实现：**
    - Object.defineProperty()
    - 虚拟DOM

# 生命周期函数
beforeCreate
created
beforeMount <div id="app"></div> 在挂载开始之前被调用
加载dom
mounted <div>hello word!</div>
```js
// mounted 不会承诺所有的子组件也都一起被挂载
// 除非使用 vm.$nextTick 
mounted: function () {
  this.$nextTick(function () {
    // Code that will run only after the
    // entire view has been rendered
  })
}
```
beforeDestroy 什么时候将被触发? 当实例被销毁之后（vm.$destroy()），会触发beforeDestroy,destroyed这两个函数
destroyed
beforeUpdate 当数据发生改变。页面还没重新渲染之前触发
updated 当数据发生改变。页面重新渲染之后触发

## 计算属性：
  **当计算属性依赖的值发生改变时，触发计算属性函数**,否则不会触发该函数

  ### 计算属性方法：
  ```js
  computed: {
      // 计算属性有缓存机制
      get: function () {

      },
      set: function (value) {
          console.log(value);
      }
  }

  method: {
      // 没有缓存,性能低
  }

  watch: {
      // 有缓存,依赖属性发生改变，则会触发
  }
  ```

  **vue会复用页面的dom**
  利用key来破环这种复用(两个元素是完全独立的，不要复用它们)

```js
    <div v-if="show">
        用户名：<input placeholder="Enter your username" />
    </div>
    <div v-else>
        邮箱：<input placeholder="Enter your email address" />
    </div>
    <div v-on:click="changeShow()"></div>
    data: {
        return {
            show: false
        }
    },
    methods: {
        changeShow () {
            this.show = true
        }
    }

    // 当用户输入邮箱后，调用changeShow()函数，标签变为用户名，可input内容没有被清空。
    // 存在上面的问题的原因是：vue会复用页面的dom

    // 解决方案
    // 利用key来破环这种复用(两个元素是完全独立的，不要复用它们)
    用户名：<input placeholder="Enter your username" key="username-input" />
    邮箱：<input placeholder="Enter your email address" key="email-input" />
    // 结果：input输入框重新渲染
```

## Vue.set() && vm.$set()
```js
// 遍历数组
<li v-for="(item, index) in lists" :key="item.id" >{{ item }}</li>
// 改变数组的某一项(引用, splice()等方法, set方法)
Vue.set(vm.lists, 1, 'shanxi');
// 等效
vm.$set(vm.lists, 1, 'shanxi');

// 遍历对象
<li v-for="(item, key, index) of lists">{{ item }}</li>

// 改变对象(引用, set方法)
Object.assign({}, vm.lists, {
  age: 27,
  address: 'shanxi'
})
// 通过Vue.set()改变对象
// vm.$set() 
Vue.set(vm.lists, 'address', 'shanxi');
// 等效
vm.$set(vm.lists, 'address', 'shanxi');
```